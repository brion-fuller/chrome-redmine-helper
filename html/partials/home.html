<div>
    <div class="alert alert-danger" data-ng-show="options.isEmpty()">
        <button type="button" class="close" data-dismiss="alert">Ã—</button>
        <strong>Warning!</strong> No options defined ! <a href="#/options">Define</a>
    </div>
</div>
<div class="row-fluid">
    <div class="offset4 span4 alert alert-info center" data-ng-show="isLoading">
        <img src="/img/ajax-loader.gif" alt="Loading..." />
        <strong>Loading...</strong>
    </div>
</div>
<div class="modal hide fade" id="issueDetails" tabindex="-1" role="dialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>{{issue.subject}}</h3>
    </div>
    <div class="modal-body">
        <p>
            <small>
                Added by 
                <a href="" data-ng-click="openAuthorPage(issue)">{{issue.author.name}}</a>
                on {{issue.created_on | date:'MMM d, y'}}
                <br/>
                <strong>Status</strong>:&nbsp;{{issue.status.name}}<br/>
                <strong>Priority</strong>:&nbsp;{{issue.priority.name}}<br/>
            </small>
        </p>
        <hr/>
        <div class="tabbable">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#description" data-toggle="tab">Description</a></li>
                <li class=""><a href="#journals" data-toggle="tab">History</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="description">
                    <div class="issue-description">
                        <p data-ng-bind-html="issue.description | nl2br"></p>
                    </div>
                </div>
                <div class="tab-pane" id="journals">
                    <p class="center" data-ng-hide="issue.detailsLoaded">Loading...</p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <a href="" class="btn" data-ng-click="openWebPage(issue)">
            <i class="icon-share"></i>&nbsp;
            Open in Redmine
        </a>
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>
    </div>
</div>
<div class="page-header">
    <h3>Your Latest Issues</h3>
</div>
<div class="well well-small row-fluid">
    <div class="span9">
        <input type="text" class="input-medium search-query" data-ng-model="search.subject" placeholder="Search by subject"/>
    </div>
    <div class="span3">
        <a href="" class="btn" data-ng-click="markAllRead()">
            <i class="icon-ok"></i>&nbsp;Mark all as read
        </a>
        <a href="" class="btn" data-ng-click="reload()" data-ng-hide="isLoading">
            <i class="icon-refresh"></i>&nbsp;Update
        </a>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <table class="table table-hover table-condensed issues">
            <thead>
                <tr>
                    <th style="width: 15px; text-align: center;">
                        <a href="" data-ng-click="order = 'read'; reverse=!reverse">#</a>
                    </th>
                    <th style="width: 250px;" >
                        <a href="" data-ng-click="order = 'author.name'; reverse=!reverse">Author</a>
                    </th>
                    <th>
                        <a href="" data-ng-click="order = 'subject'; reverse=!reverse">Subject</a>
                    </th>
                    <th style="width: 15px; text-align: center;">
                        <a href="" data-ng-click="order = 'read'; reverse=!reverse">
                            <i class="icon-star"></i>
                        </a>
                    </th>
                    <th style="width: 50px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="issue in issues | filter:search | orderBy:order:reverse | pager:page*pageSize | limitTo:pageSize" data-ng-class="issue.read || 'unread'">
                    <td>
                        <input type="checkbox" name="issue[]" value="{{issue.id}}" /> 
                    </td>
                    <td>{{issue.author.name}}</td>
                    <td>
                        <a href="" data-ng-click="showDetails(issue)">{{issue.subject}}</a>
                    </td>
                    <td>
                        <i class="icon-star pointer" data-ng-click="markRead(issue)" data-ng-hide="issue.read"></i>
                        <i class="icon-star-empty pointer" data-ng-click="markUnRead(issue)" data-ng-show="issue.read"></i>
                    </td>
                    <td>
                        <i class="icon-share pointer" data-ng-click="openWebPage(issue)" data-type="tooltip" data-original-title="Open issue in Redmine"></i>
                    </td>
                </tr>
            </tbody>
        </table>
        <div data-ng-show="issues.length > pageSize">
            <ul class="pager">
                <li>
                    <button class="btn" data-ng-disabled="page == 0" data-ng-click="page=page-1">&larr;&nbsp;Previous</button>
                </li>
                <li>
                    <button class="btn" data-ng-disabled="page >= issues.length/pageSize - 1" data-ng-click="page=page+1">Next&nbsp;&rarr;</button>
                </li>
            </ul>
        </div>
    </div>
</div>